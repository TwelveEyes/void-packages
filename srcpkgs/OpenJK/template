# Template file for 'OpenJK'
pkgname=OpenJK
version=0.0.20242603
revision=1
_gitrev=61a9ff629ede762a20e1e98ea092f3728109d806
wrksrc="${pkgname}-${_gitrev}"
build_style=cmake
configure_args="-DCMAKE_INSTALL_PREFIX=/usr/lib/${pkgname} -DBuildJK2SPEngine=on
 -DBuildJK2SPGame=on -DBuildJK2SPRdVanilla=on"
hostmakedepends="pkg-config"
makedepends="libjpeg-turbo-devel libpng-devel zlib-devel SDL2-devel"
short_desc="Open Source Implementation of Jedi Knight II and III Engine"
maintainer="Orphaned <orphan@voidlinux.org>"
license="GPL-2.0-only"
homepage="https://github.com/TwelveEyes/OpenJK"
distfiles="https://github.com/TwelveEyes/OpenJK/archive/${_gitrev}.tar.gz"
checksum=054e3bf788e297ca8af9dd1dbfd757f52042532cd0839b4dff16bacb6bdd7425

post_install() {
	vbin "${FILESDIR}/openjk"
	vbin "${FILESDIR}/openjk_sp"
	vbin "${FILESDIR}/openjkded"
	vbin "${FILESDIR}/openjo"

	vinstall "${FILESDIR}/OpenJK.desktop" 644 usr/share/applications
	vinstall "${FILESDIR}/OpenJKMP.desktop" 644 usr/share/applications
	vinstall "${FILESDIR}/OpenJO.desktop" 644 usr/share/applications

	for size in 16 32 64 128 1024; do
		vinstall shared/icons/${pkgname}_Icon_${size}.png 644 usr/share/icons/hicolor/${size}x${size}/apps/ OpenJK.png
	done

	vdoc "${FILESDIR}/README.voidlinux"
}
